<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="favicon.ico">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Story Reader</title>
  <link rel="stylesheet" href="app.css">
  <link rel="stylesheet" href="sprite-recttransform.css" id="spriteCss">
  <script>
    // Ensure assets base is available before any module initializes
    window.DATA_ASSETS = 'https://raw.githubusercontent.com/akgcc/arkdata/main/assets/';
  </script>
  <script defer src="story_background.js"></script>
  <script defer src="story_audio.js"></script>
  <script defer src="story_characters.js"></script>
  <script defer src="story_camera.js"></script>
  <script defer src="story_effects.js"></script>
  <script defer src="app.js"></script>
  <noscript>This page requires JavaScript to function.</noscript>
</head>
<body>
  <header id="appHeader">
    <label>
      Server:
      <select id="serverSelect"></select>
    </label>
    <label>
      Category:
      <select id="categorySelect"></select>
    </label>
    <label>
      Chapter:
      <select id="chapterSelect"></select>
    </label>
    <label>
      Level:
      <select id="levelSelect"></select>
    </label>
    <label>
      Text speed:
      <input id="speedSlider" type="range" min="0" max="100" step="1">
      <span id="speedValue" class="muted"></span>
    </label>
    <label>
      Doctor's name:
      <input id="playerName" type="text" placeholder="{@nickname}" maxlength="32" />
    </label>
    <span id="status" class="muted"></span>
  </header>
  <button id="headerToggle" aria-controls="appHeader" aria-expanded="true" title="Hide header">â–²</button>

  <section id="current" hidden>
    <div class="name" id="currentName"></div>
    <div class="dialog"><div class="text" id="currentText"></div></div>
    <div id="choices" class="choices"></div>
  </section>

  <!-- Vignette overlay (top/bottom shadows). Stays above images, below dialog/blocker. -->
  <div id="vignette" aria-hidden="true"></div>

  <div id="controls">
    <button id="prevBtn">Previous</button>
    <button id="logBtn">Log</button>
    <button id="nextBtn">Next</button>
    <span class="muted" id="progress"></span>
  </div>

  <section id="list"></section>

  <div id="logModal" role="dialog" aria-modal="true" aria-labelledby="logTitle">
    <div class="modal-content">
      <div class="modal-header">
        <strong id="logTitle">History Log</strong>
        <button class="close-btn" id="closeLogBtn" aria-label="Close">?</button>
      </div>
      <div class="modal-body">
        <div id="logContainer"></div>
      </div>
    </div>
  </div>
</body>
</html>
